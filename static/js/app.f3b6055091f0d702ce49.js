webpackJsonp([1,0],[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(30),r=i(o),a=n(16),s=i(a);new r.default({el:"#app",template:"<App/>",components:{App:s.default}})},function(t,e){"use strict";function n(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<6;n++)e+=t[Math.floor(Math.random()*t.length)];return e}Object.defineProperty(e,"__esModule",{value:!0}),e.randomId=n},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(19),r=i(o);e.default={name:"app",components:{Workshop:r.default}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"Editor",props:{bannerImgUrl:String,sections:Array,sectionChange:Function,articleChange:Function,appendSection:Function,appendArticle:Function,removeSection:Function,removeArticle:Function,bannerImgUrlChange:Function}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(22),r=i(o),a=n(20),s=i(a),l=n(21),c=i(l);e.default={name:"Previewer",components:{EmailHeader:r.default,EmailBody:s.default,EmailFooter:c.default},props:{bannerImgUrl:String,sections:Array},data:function(){return{copyHintActive:!1,copyHintTimer:null,showSourceCodeModal:!1,sourceCode:""}},methods:{openSourceCodeModal:function(){this.sourceCode=this.$refs.email.outerHTML,this.showSourceCodeModal=!0},closeSourceCodeModal:function(){this.showSourceCodeModal=!1},copySourceCode:function(){var t=this,e=document.querySelector(".source-code");e.select();try{var n=document.execCommand("copy");n&&(clearTimeout(this.copyHintTimer),this.copyHintActive=!0,setTimeout(function(){t.copyHintActive=!1},3e3))}catch(t){}document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges()}}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(9),r=i(o),a=n(17),s=i(a),l=n(18),c=i(l),d=n(1);e.default={name:"Workshop",components:{Editor:s.default,Previewer:c.default},data:function(){return{bannerImgUrl:"",sections:[]}},mounted:function(){this.loadSectionsFromLS(),this.loadBannerFromLS()},methods:{createArticle:function(){return{id:(0,d.randomId)(),title:"",previewText:"",imgUrl:"",link:"",linkText:""}},createSection:function(){return{id:(0,d.randomId)(),title:"",articles:[this.createArticle()]}},sectionChange:function(t,e,n){var i=this.sections.find(function(e){return e.id===t});i[e]=n,this.saveSectionsToLS()},articleChange:function(t,e,n,i){var o=this.sections.find(function(e){return e.id===t}),r=o.articles.find(function(t){return t.id===e});r[n]=i,this.saveSectionsToLS()},appendSection:function(){this.sections.push(this.createSection()),this.saveSectionsToLS()},appendArticle:function(t){var e=this.sections.find(function(e){return e.id===t});e.articles.push(this.createArticle()),this.saveSectionsToLS()},removeSection:function(t){this.sections=this.sections.filter(function(e){return e.id!==t}),this.saveSectionsToLS()},removeArticle:function(t,e){var n=this.sections.find(function(e){return e.id===t});n.articles=n.articles.filter(function(t){return t.id!==e}),this.saveSectionsToLS()},bannerImgUrlChange:function(t){this.bannerImgUrl=t,this.saveBannerToLS()},loadBannerFromLS:function(){var t=window.localStorage.getItem("moka-weekly-email__banner");try{this.bannerImgUrl=JSON.parse(t)||""}catch(t){console.error("Failed to load data from local storage: "+t),this.bannerImgUrl=""}},saveBannerToLS:function(){window.localStorage.setItem("moka-weekly-email__banner",(0,r.default)(this.bannerImgUrl))},loadSectionsFromLS:function(){var t=window.localStorage.getItem("moka-weekly-email__section");try{this.sections=JSON.parse(t)||[this.createSection()]}catch(t){console.error("Failed to load data from local storage: "+t),this.sections=[this.createSection()]}},saveSectionsToLS:function(){window.localStorage.setItem("moka-weekly-email__section",(0,r.default)(this.sections))}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"EmailBody",props:{bannerImgUrl:String,sections:Array}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"EmailHeader",data:function(){return{phone:"(010) 57134227",email:"hello@mokahr.com",location:"北京市海淀区 中关村大街 1 号 海龙大厦 1502#",copyrightZh:"版权所有©北京希瑞亚斯科技有限公司",copyrightEn:"Copyright© Sirius Corporation,LTD.",spriteStyle:{backgroundImage:"url(https://public-cdn.mokahr.com/mkr/email_sprite.png)",backgroundRepeat:"no-repeat"},qrcodeSprite:{width:"144px",height:"144px",backgroundPosition:"-155px -5px"},locationSprite:{width:"16px",height:"16px",backgroundPosition:"-31px -5px"},emailSprite:{width:"16px",height:"16px",backgroundPosition:"-5px -5px"},telephoneSprite:{width:"16px",height:"16px",backgroundPosition:"-57px -5px"}}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"EmailHeader",data:function(){return{spriteStyle:{backgroundImage:"url(https://public-cdn.mokahr.com/mkr/email_sprite.png)",backgroundRepeat:"no-repeat"},logoSprite:{width:"140px",height:"28px",backgroundPosition:"-5px -31px"}}}}},,,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,n){var i,o;n(13),i=n(2);var r=n(26);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=r.render,o.staticRenderFns=r.staticRenderFns,t.exports=i},function(t,e,n){var i,o;n(14),i=n(3);var r=n(27);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=r.render,o.staticRenderFns=r.staticRenderFns,o._scopeId="data-v-6ad68e70",t.exports=i},function(t,e,n){var i,o;n(12),i=n(4);var r=n(23);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=r.render,o.staticRenderFns=r.staticRenderFns,o._scopeId="data-v-099cc06a",t.exports=i},function(t,e,n){var i,o;n(15),i=n(5);var r=n(29);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=r.render,o.staticRenderFns=r.staticRenderFns,o._scopeId="data-v-747631bc",t.exports=i},function(t,e,n){var i,o;i=n(6);var r=n(28);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=r.render,o.staticRenderFns=r.staticRenderFns,t.exports=i},function(t,e,n){var i,o;i=n(7);var r=n(25);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=r.render,o.staticRenderFns=r.staticRenderFns,t.exports=i},function(t,e,n){var i,o;i=n(8);var r=n(24);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=r.render,o.staticRenderFns=r.staticRenderFns,t.exports=i},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"previewer"},[n("table",{ref:"email",style:{width:"100%",height:"100%"}},[n("tbody",[n("tr",{style:{height:104,backgroundColor:"#f4f4f6"}},[n("td",{attrs:{align:"center"}},[n("email-header")],1)]),t._v(" "),n("tr",[n("td",{attrs:{align:"center"}},[n("email-body",{attrs:{bannerImgUrl:t.bannerImgUrl,sections:t.sections}})],1)]),t._v(" "),n("tr",{style:{height:"310px",backgroundColor:"#f4f4f6"}},[n("td",{attrs:{align:"center",valign:"bottom"}},[n("email-footer")],1)])])]),t._v(" "),n("button",{staticClass:"source-btn",on:{click:t.openSourceCodeModal}},[t._v("查看源代码")]),t._v(" "),n("div",{class:["source-overlay",{active:t.showSourceCodeModal}],on:{click:t.closeSourceCodeModal}},[n("div",{staticClass:"source-modal",on:{click:function(t){t.stopPropagation()}}},[n("div",{staticClass:"modal-header"},[t._v("\n        邮件源代码\n        "),n("span",{staticClass:"close-btn",on:{click:t.closeSourceCodeModal}},[t._v("×")])]),t._v(" "),n("div",{staticClass:"modal-body"},[n("textarea",{staticClass:"source-code",domProps:{value:t.sourceCode}})]),t._v(" "),n("div",{staticClass:"modal-footer"},[n("button",{staticClass:"copy-btn",on:{click:t.copySourceCode}},[t._v("复制")]),t._v(" "),n("span",{class:["copy-hint",{active:t.copyHintActive}]},[t._v("已复制！")])])])])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",{style:{width:"672px",height:"100px",borderCollapse:"collapse"}},[n("tbody",[n("tr",[n("td",[n("a",{attrs:{href:"http://www.mokahr.com",target:"_blank"}},[n("div",{style:[{width:"142px",height:"28px"},t.spriteStyle,t.logoSprite]})])]),t._v(" "),n("td",{style:{textAlign:"right"}},[n("a",{style:{display:"inline-block",padding:"13px 16px",fontSize:"14px",lineHeight:1,textDecoration:"none",color:"#787E91",border:"1px solid #DDDFE3",borderRadius:"2px",cursor:"pointer"},attrs:{_target:"blank",href:"http://www.mokahr.com"}},[t._v("\n          进入官网\n        ")])])])])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",{style:{width:"672px",borderCollapse:"collapse"}},[n("tbody",[n("tr",{style:{height:"168px"}},[n("td",{style:{width:"192px"},attrs:{valign:"top"}},[n("div",{style:[{width:"144px",height:"144px"},t.spriteStyle,t.qrcodeSprite]})]),t._v(" "),n("td",{attrs:{valign:"top"}},[n("table",{style:{borderCollapse:"collapse"}},[n("tbody",[n("tr",{style:{height:"40px"}},[n("td",{style:{width:"30px"}},[n("div",{style:[{width:"15px",height:"15px"},t.spriteStyle,t.telephoneSprite]})]),t._v(" "),n("td",{style:{fontSize:"13px",color:"#5C6170"}},[t._v("\n                "+t._s(t.phone)+"\n              ")])]),t._v(" "),n("tr",{style:{height:"40px"}},[n("td",{style:{width:"30px"}},[n("div",{style:[{width:"15px",height:"15px"},t.spriteStyle,t.emailSprite]})]),t._v(" "),n("td",{style:{fontSize:"13px",color:"#5C6170"}},[n("a",{style:{color:"#0C8CF6",textDecoration:"none"},attrs:{href:"mailto:"+t.email}},[t._v("\n                  "+t._s(t.email)+"\n                ")])])]),t._v(" "),n("tr",{style:{height:"40px"}},[n("td",{style:{width:"30px"}},[n("div",{style:[{width:"15px",height:"15px"},t.spriteStyle,t.locationSprite]})]),t._v(" "),n("td",{style:{fontSize:"13px",color:"#5C6170"}},[t._v("\n                "+t._s(t.location)+"\n              ")])])])])])]),t._v(" "),n("tr",[n("td",{style:{height:"90px",borderTop:"1px solid #DDDFE3"},attrs:{colspan:"2",align:"center"}},[n("table",{style:{borderCollapse:"collapse"}},[n("tbody",[n("tr",[n("td",{style:{fontSize:"13px",lineHeight:"24px",color:"#9A9FAC"},attrs:{align:"center"}},[t._v("\n                "+t._s(t.copyrightZh)+"\n              ")])]),t._v(" "),n("tr",[n("td",{style:{fontSize:"13px",lineHeight:"24px",color:"#9A9FAC"},attrs:{align:"center"}},[t._v("\n                "+t._s(t.copyrightEn)+"\n              ")])])])])])])])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("workshop")],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor"},[n("div",{staticClass:"panel"},[n("div",{staticClass:"text-input"},[n("label",{attrs:{for:"banner"}},[t._v("Banner图片")]),t._v(" "),n("input",{attrs:{id:"banner",placeholder:"Banner图片链接"},domProps:{value:t.bannerImgUrl},on:{input:function(e){t.bannerImgUrlChange(e.target.value)}}})])]),t._v(" "),t.sections.length<=0?n("div",{staticClass:"empty-hint"},[t._v("邮件里面什么也没有，你不会打算就这样发了吧？")]):t._l(t.sections,function(e,i){return n("div",{key:e.id,staticClass:"panel"},[n("div",{staticClass:"order"},[t._v("\n      段落#"+t._s(i+1)+"\n      "),n("button",{staticClass:"delete-btn",on:{click:function(n){t.removeSection(e.id)}}},[t._v("删除")])]),t._v(" "),n("div",{staticClass:"section-title text-input"},[n("label",{attrs:{for:e.id}},[t._v("标题")]),t._v(" "),n("input",{attrs:{id:e.id,placeholder:"段落标题"},domProps:{value:e.title},on:{input:function(n){t.sectionChange(e.id,"title",n.target.value)}}})]),t._v(" "),t._l(e.articles,function(i,o){return n("div",{key:i.id,staticClass:"panel"},[n("div",{staticClass:"order"},[t._v("\n        文章#"+t._s(o+1)+"\n        "),n("button",{staticClass:"delete-btn",on:{click:function(n){t.removeArticle(e.id,i.id)}}},[t._v("删除")])]),t._v(" "),n("div",{staticClass:"article-title text-input"},[n("label",{attrs:{for:"article-title-"+i.id}},[t._v("标题")]),t._v(" "),n("input",{attrs:{id:"article-title-"+i.id,placeholder:"文章标题"},domProps:{value:i.title},on:{input:function(n){t.articleChange(e.id,i.id,"title",n.target.value)}}})]),t._v(" "),n("div",{staticClass:"article-preview-text text-input"},[n("label",{attrs:{for:"article-preview-text-"+i.id}},[t._v("简介")]),t._v(" "),n("textarea",{attrs:{id:"article-preview-text-"+i.id,placeholder:"文章简介"},domProps:{value:i.previewText},on:{input:function(n){t.articleChange(e.id,i.id,"previewText",n.target.value)}}})]),t._v(" "),n("div",{staticClass:"article-img-url text-input"},[n("label",{attrs:{for:"article-img-url-"+i.id}},[t._v("配图")]),t._v(" "),n("input",{attrs:{id:"article-img-url-"+i.id,placeholder:"文章配图链接"},domProps:{value:i.imgUrl},on:{input:function(n){t.articleChange(e.id,i.id,"imgUrl",n.target.value)}}})]),t._v(" "),n("div",{staticClass:"article-link text-input"},[n("label",{attrs:{for:"article-link-"+i.id}},[t._v("链接")]),t._v(" "),n("input",{attrs:{id:"article-link-"+i.id,placeholder:"文章链接"},domProps:{value:i.link},on:{input:function(n){t.articleChange(e.id,i.id,"link",n.target.value)}}})]),t._v(" "),n("div",{staticClass:"article-link-text text-input"},[n("label",{attrs:{for:"article-link-text-"+i.id}},[t._v("链接文字")]),t._v(" "),n("input",{attrs:{id:"article-link-text-"+i.id,placeholder:"文章链接显示文字，例如“查看更多”"},domProps:{value:i.linkText},on:{input:function(n){t.articleChange(e.id,i.id,"linkText",n.target.value)}}})])])}),t._v(" "),n("div",{staticClass:"add-btn-wrapper"},[n("button",{staticClass:"add-btn",on:{click:function(n){t.appendArticle(e.id)}}},[t._v("添加文章")])])],2)}),t._v(" "),n("div",{staticClass:"add-btn-wrapper add-section"},[n("button",{staticClass:"add-btn",on:{click:t.appendSection}},[t._v("添加段落")])])],2)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",{style:{width:"672px",borderCollapse:"collapse"}},[n("tbody",[n("tr",{style:{height:"245px"}},[n("td",[n("img",{style:{width:"672px"},attrs:{src:t.bannerImgUrl}})])]),t._v(" "),t._l(t.sections,function(e){return n("tr",[n("td",[n("table",{style:{width:"100%",borderCollapse:"collapse"}},[n("tbody",[n("tr",{style:{height:"84px"}},[n("td",{style:{paddingTop:"20px",fontSize:"24px",fontWeight:"bold",color:"#40444F",borderBottom:"1px solid #DDDFE3"},attrs:{colspan:"2"}},[t._v("\n                "+t._s(e.title)+"\n              ")])]),t._v(" "),t._l(e.articles,function(i,o){return n("tr",{style:{height:"153px"}},[n("td",{style:{width:"192px",paddingTop:"23px",borderTop:e.articles.length>1&&o>0?"1px solid #F4F4F6":null},attrs:{valign:"top"}},[n("img",{style:{width:"144px",borderRadius:"2px"},attrs:{src:i.imgUrl}})]),t._v(" "),n("td",{style:{paddingTop:"14px",borderTop:e.articles.length>1&&o>0?"1px solid #F4F4F6":null},attrs:{valign:"top"}},[n("table",{style:{borderCollapse:"collapse"}},[n("tbody",[n("tr",[n("td",{style:{paddingBottom:"8px",fontSize:"20px",fontWeight:"bold",lineHeight:"30px",color:"#40444F"}},[t._v("\n                        "+t._s(i.title)+"\n                      ")])]),t._v(" "),n("tr",[n("td",{style:{paddingBottom:"5px",fontSize:"13px",lineHeight:"20px",color:"#40444F"}},[t._v("\n                          "+t._s(i.previewText)+"\n                      ")])]),t._v(" "),n("tr",[n("td",[n("a",{style:{fontSize:"13px",color:"#0C8CF6",textDecoration:"none"},attrs:{_target:"blank",href:i.link}},[t._v("\n                          "+t._s(i.linkText)+"\n                        ")])])])])])])])})],2)])])])})],2)])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"workshop"},[n("div",{staticClass:"workshop__editor"},[n("editor",{attrs:{bannerImgUrl:t.bannerImgUrl,sections:t.sections,sectionChange:t.sectionChange,articleChange:t.articleChange,appendSection:t.appendSection,appendArticle:t.appendArticle,removeSection:t.removeSection,removeArticle:t.removeArticle,bannerImgUrlChange:t.bannerImgUrlChange}})],1),t._v(" "),n("div",{staticClass:"workshop__previewer"},[n("previewer",{attrs:{bannerImgUrl:t.bannerImgUrl,sections:t.sections}})],1)])},staticRenderFns:[]}}]);